<%- include('../partials/head.ejs', { title }) %>
<%- include('../partials/header.ejs') %>
<%- include('../partials/nav.ejs', { nav }) %>

<main id="main" class="container" tabindex="-1">
  <h1><%= title %></h1>

  <!-- Flash messages -->
  <div id="messages"><%- (typeof messages === 'function') ? messages() : '' %></div>

  <!-- (Optional) server-side validation errors -->
  <% if (errors && typeof errors.array === 'function' && errors.array().length) { %>
    <ul class="notice" aria-live="polite">
      <% errors.array().forEach(err => { %>
        <li><%= err.msg %></li>
      <% }) %>
    </ul>
  <% } %>

  <p>Manage classifications and vehicles.</p>

  <ul class="card-grid" role="list" style="margin-top:1rem">
    <li class="card">
      <div class="card-body">
        <h3>Add a New Classification</h3>
        <p>Create a classification (letters only, no spaces or symbols).</p>
        <a class="btn primary" href="/inv/add-classification">Start</a>
      </div>
    </li>
    <li class="card">
      <div class="card-body">
        <h3>Add a New Vehicle</h3>
        <p>Add a vehicle and assign it to a classification.</p>
        <a class="btn primary" href="/inv/add-inventory">Start</a>
      </div>
    </li>
  </ul>

  <!-- Manage Inventory (AJAX select + table) -->
  <section aria-labelledby="manage-heading" style="margin-top:2rem">
    <h2 id="manage-heading">Manage Inventory</h2>
    <p>Select a classification to see and manage the items that belong to it.</p>

    <!-- Classification select injected from utilities.buildClassificationList() -->
    <div class="form-row" style="max-width:480px">
      <label for="classificationList">Classification</label>
      <%- classificationSelect %>
    </div>

    <!-- Results table built by /public/js/inventory.js -->
    <table id="inventoryDisplay" class="table" style="margin-top:1rem"></table>

    <noscript>JavaScript must be enabled to use this page.</noscript>
  </section>
</main>

<%- include('../partials/footer.ejs') %>

<!-- Hook up the AJAX behavior -->
<script src="/js/inventory.js"></script>

<%- include('../partials/head.ejs', { title: title || 'Register' }) %>
<%- include('../partials/header.ejs') %>
<%- include('../partials/nav.ejs', { nav }) %>

<main id="main" class="container" tabindex="-1">
  <h1><%= title %></h1>

  <!-- Flash messages -->
  <%- messages() %>

  <!-- Server-side validation errors -->
  <% if (errors) { %>
    <div id="messages">
      <ul class="messages notice">
        <% errors.array().forEach(function(err){ %>
          <li><%= err.msg %></li>
        <% }) %>
      </ul>
    </div>
  <% } %>

  <form class="form" action="/account/register" method="post" novalidate>
    <div class="form-row">
      <label for="account_firstname">First name</label>
      <input
        type="text"
        id="account_firstname"
        name="account_firstname"
        required
        value="<%= typeof account_firstname !== 'undefined' ? account_firstname : '' %>"
        autocomplete="given-name"
      />
    </div>

    <div class="form-row">
      <label for="account_lastname">Last name</label>
      <input
        type="text"
        id="account_lastname"
        name="account_lastname"
        required
        value="<%= typeof account_lastname !== 'undefined' ? account_lastname : '' %>"
        autocomplete="family-name"
      />
    </div>

    <div class="form-row">
      <label for="account_email">Email</label>
      <input
        type="email"
        id="account_email"
        name="account_email"
        required
        value="<%= typeof account_email !== 'undefined' ? account_email : '' %>"
        autocomplete="email"
        inputmode="email"
      />
    </div>

    <div class="form-row">
      <label for="account_password">Password</label>
      <div class="notice" style="margin:.25rem 0 .5rem;">
        Passwords must be at least 12 characters and contain at least 1 number,
        1 capital letter, and 1 special character.
      </div>
      <input
        type="password"
        id="account_password"
        name="account_password"
        required
        autocomplete="new-password"
        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
      />
    </div>

    <button class="btn primary" type="submit">Create Account</button>
  </form>
</main>

<%- include('../partials/footer.ejs') %>
